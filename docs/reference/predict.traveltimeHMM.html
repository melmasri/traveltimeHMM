<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Predict the travel time for a trip using a <code>traveltimeHMM</code> model object — predict.traveltimeHMM • traveltimeHMM</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Predict the travel time for a trip using a <code>traveltimeHMM</code> model object — predict.traveltimeHMM" />
<meta property="og:description" content="predict.traveltimeHMM performs a point prediction by simulation using parameter estimates provided by a traveltimeHMM model object.
Prediction can be performed for a single trip only." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">traveltimeHMM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/traveltimeHMM.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/melmasri/traveltimeHMM">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Predict the travel time for a trip using a <code>traveltimeHMM</code> model object</h1>
    <small class="dont-index">Source: <a href='https://github.com/melmasri/traveltimeHMM/blob/master/R/predict.R'><code>R/predict.R</code></a></small>
    <div class="hidden name"><code>predict.traveltimeHMM.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>predict.traveltimeHMM</code> performs a point prediction by simulation using parameter estimates provided by a <code>traveltimeHMM</code> model object.
Prediction can be performed for a single trip only.</p>
    </div>

    <pre class="usage"><span class='co'># S3 method for traveltimeHMM</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/predict'>predict</a></span>(
  <span class='no'>object</span>,
  <span class='no'>tripdata</span>,
  <span class='kw'>starttime</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Sys.time'>Sys.time</a></span>(),
  <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>1000</span>,
  <span class='kw'>logE</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>time_bins.fun</span> <span class='kw'>=</span> <span class='no'>time_bins</span>,
  <span class='no'>...</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>A model object (a list) provided through the execution of function <code>timetravelHMM</code>.
The list includes information on model as well as estimates for its parameters.
See <code>timetravelHMM</code> man page.</p></td>
    </tr>
    <tr>
      <th>tripdata</th>
      <td><p>A data frame of road links with information on each
link's traversal.  Columns minimally include objects 'linkID' and 'length',
and the latter must have the same length.  Rows must be in chronological order.
The program assumes that the sequence of road links forms a coherent and feasible
path.  <em>No verification is performed to that effect</em>.</p></td>
    </tr>
    <tr>
      <th>starttime</th>
      <td><p>The start date and time for the very first link of the trip,
in POSIXct format.  Default is the current date and time.</p></td>
    </tr>
    <tr>
      <th>n</th>
      <td><p>Number of samples.  Default is 1000.</p></td>
    </tr>
    <tr>
      <th>logE</th>
      <td><p>Point estimate of trip effects.  <code>logE</code> normally needs to be a numerical vector of size <code>n</code>.
If a single numerical value is supplied, it will be replicated into a vector.  If <code>logE</code> is <code>NULL</code>
the function will use either a vector of simulated values (if the model is from the <code>trip</code> family),
or a vector of <code>0</code> otherwise.  Default is <code>NULL</code>.  NOTE: when simulating values for the
vector, the value for \(\tau\) is taken from the model object.</p></td>
    </tr>
    <tr>
      <th>time_bins.fun</th>
      <td><p>A functional to map real time to specified time bins, see `?rules2timebins`.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>not used.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>predict.traveltimeHMM</code> returns a numerical vector of size <code>n</code> representing the point prediction of total travel time, in seconds, for each run.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The function begins by validating and, if required, replacing the value of the parameter <code>logE</code>
(see explanation alongside <code>logE</code> in the <em>Arguments</em> section).  It then transfers execution
to the appropriate function according to the selected model: <code>predict.traveltimeHMM</code> for
models of the <code>HMM</code> family, or <code>predict.traveltimeHMM.no_dependence</code> otherwise.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Woodard, D., Nogin, G., Koch, P., Racz, D., Goldszmidt, M., Horvitz, E., 2017.  Predicting travel time reliability using mobile phone GPS data.  Transportation Research Part C, 75, 30-44.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>(<span class='no'>tripset</span>)

<span class='co'># Fit a model - use ?traveltimeHMM for details</span>
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='traveltimeHMM.html'>traveltimeHMM</a></span>(<span class='no'>tripset</span>$<span class='no'>logspeed</span>, <span class='no'>tripset</span>$<span class='no'>tripID</span>,
                     <span class='no'>tripset</span>$<span class='no'>timeBin</span>, <span class='no'>tripset</span>$<span class='no'>linkID</span>, <span class='kw'>nQ</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>max.it</span> <span class='kw'>=</span> <span class='fl'>10</span>)

<span class='co'># Perform a prediction for trip #2700 using the fitted model.</span>
<span class='no'>single_trip</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/subset'>subset</a></span>(<span class='no'>tripset</span>, <span class='no'>tripID</span><span class='kw'>==</span><span class='fl'>2700</span>)

<span class='co'># We need to supply the time stamp of the very first link traversal (third parameter)</span>
<span class='no'>pred</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/predict'>predict</a></span>(<span class='no'>fit</span>, <span class='no'>single_trip</span>,<span class='no'>single_trip</span>$<span class='no'>time</span>[<span class='fl'>1</span>])

<span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/hist'>hist</a></span>(<span class='no'>pred</span>)                     <span class='co'># histogram of prediction samples</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/mean'>mean</a></span>(<span class='no'>pred</span>)                     <span class='co'># travel time point estimate</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sum'>sum</a></span>(<span class='no'>single_trip</span>$<span class='no'>traveltime</span>)    <span class='co'># observed travel time</span>

?<span class='no'>traveltimeHMM</span>      <span class='co'># for help on traveltimeHMM, the estimation function</span>
?<span class='no'>predict.traveltimeHMM</span> <span class='co'># for help on predict.traveltimeHMM, the prediction function</span>
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Mohamad Elmasri.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

